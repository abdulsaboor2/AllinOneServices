{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState, useRef, useEffect } from \"react\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Keyboard from \"react-native-web/dist/exports/Keyboard\";\nimport KeyboardAvoidingView from \"react-native-web/dist/exports/KeyboardAvoidingView\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport TouchableWithoutFeedback from \"react-native-web/dist/exports/TouchableWithoutFeedback\";\nimport Pressable from \"react-native-web/dist/exports/Pressable\";\nimport View from \"react-native-web/dist/exports/View\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport LogBox from \"react-native-web/dist/exports/LogBox\";\nimport StatusBar from \"react-native-web/dist/exports/StatusBar\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Switch from \"react-native-web/dist/exports/Switch\";\nimport { Button, SocialIcon } from \"react-native-elements\";\nimport { FontAwesome } from \"@expo/vector-icons\";\nimport { FontAwesome5 } from \"@expo/vector-icons\";\nimport * as Facebook from \"expo-facebook\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport { firebase } from \"../firebaseConfig/Config\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport Spinner from \"react-native-loading-spinner-overlay\";\nimport ImagePikker from \"./ImagePikker\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar userToken;\nexport default function ProfileEdit(_ref) {\n  var navigation = _ref.navigation;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      loading = _useState2[0],\n      setloading = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      fullName = _useState4[0],\n      setFullname = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      email = _useState6[0],\n      setEmail = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      Address = _useState8[0],\n      setAddress = _useState8[1];\n\n  var _useState9 = useState(\"\"),\n      _useState10 = _slicedToArray(_useState9, 2),\n      phone = _useState10[0],\n      setPhone = _useState10[1];\n\n  var _useState11 = useState(\"\"),\n      _useState12 = _slicedToArray(_useState11, 2),\n      lat = _useState12[0],\n      setLat = _useState12[1];\n\n  var _useState13 = useState(\"\"),\n      _useState14 = _slicedToArray(_useState13, 2),\n      long = _useState14[0],\n      setLong = _useState14[1];\n\n  var _useState15 = useState(\"\"),\n      _useState16 = _slicedToArray(_useState15, 2),\n      images = _useState16[0],\n      setImage = _useState16[1];\n\n  var phoneRef = useRef(undefined);\n  useEffect(function _callee() {\n    return _regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            setloading(true);\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem(\"xyz\"));\n\n          case 3:\n            userToken = _context.sent;\n            GetProfData();\n            getpictureURL();\n\n          case 6:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }, []);\n\n  var getpictureURL = function getpictureURL() {\n    console.log(\"-------------------------->\", userToken);\n\n    try {\n      firebase.storage().ref(userToken).getDownloadURL().then(function (url) {\n        setImage(url);\n        console.log(\"refress\");\n      });\n    } catch (e) {\n      console.log(\"getting downloadURL of image error => \", e);\n    }\n\n    ;\n  };\n\n  console.log(\"image------>>>>>>>\" + images);\n\n  var GetProfData = function GetProfData() {\n    console.log(userToken);\n    firebase.firestore().collection(\"Users\").doc(userToken).get().then(function (doc) {\n      if (doc.exists) {\n        console.log(\"Document data:\", doc.data());\n        var data = doc.data();\n        setFullname(data.fullName);\n        setEmail(data.email);\n        setPhone(data.phone);\n        setAddress(data.Address);\n        setloading(false);\n      } else {\n        console.log(\"No such document!\");\n        setloading(false);\n      }\n    }).catch(function (error) {\n      console.log(\"Error getting document:\", error);\n      setloading(false);\n    });\n  };\n\n  var updateUser = function updateUser() {\n    setloading(true);\n    console.log(userToken);\n    firebase.firestore().collection(\"Users\").doc(userToken).set({\n      fullName: fullName,\n      email: email,\n      phone: phone,\n      Address: Address,\n      lat: lat,\n      long: long,\n      images: images\n    }).then(function (docRef) {\n      navigation.goBack();\n      setloading(false);\n    }).catch(function (error) {\n      console.error(\"Error: \", error);\n      setloading(false);\n    });\n  };\n\n  return _jsxs(KeyboardAvoidingView, {\n    style: styles.containerView,\n    behavior: \"padding\",\n    children: [_jsx(StatusBar, {\n      barStyle: \"dark-content\"\n    }), _jsxs(View, {\n      style: styles.container,\n      children: [_jsx(Spinner, {\n        visible: loading,\n        textContent: \"Loading...\",\n        textStyle: styles.spinnerTextStyle\n      }), _jsx(TouchableWithoutFeedback, {\n        onPress: Keyboard.dismiss,\n        children: _jsx(View, {\n          style: styles.loginScreenContainer,\n          children: _jsxs(View, {\n            style: styles.loginFormView,\n            children: [_jsx(Text, {\n              style: styles.logoText,\n              children: \"Edit Profile\"\n            }), _jsx(View, {\n              style: styles.margin,\n              children: _jsx(ImagePikker, {\n                ss: images\n              })\n            }), _jsx(TextInput, {\n              placeholder: \"Full name\",\n              placeholderColor: \"#c4c3cb\",\n              style: styles.loginFormTextInput,\n              value: fullName,\n              onChangeText: function onChangeText(t1) {\n                setFullname(t1);\n              }\n            }), _jsx(TextInput, {\n              placeholder: \"Email\",\n              placeholderColor: \"#c4c3cb\",\n              style: styles.loginFormTextInput,\n              keyboardType: \"email-address\",\n              value: email,\n              onChangeText: function onChangeText(t1) {\n                setEmail(t1);\n              }\n            }), _jsx(TextInput, {\n              placeholder: \"Phone\",\n              placeholderColor: \"#c4c3cb\",\n              style: styles.loginFormTextInput,\n              keyboardType: \"phone-pad\",\n              value: phone,\n              onChangeText: function onChangeText(t1) {\n                setPhone(t1);\n              }\n            }), _jsx(Button, {\n              buttonStyle: styles.loginButton,\n              onPress: function onPress() {\n                return updateUser();\n              },\n              title: \"Update\"\n            })]\n          })\n        })\n      })]\n    })]\n  });\n}\nvar styles = StyleSheet.create({\n  containerView: {\n    flex: 1,\n    alignItems: \"center\"\n  },\n  loginScreenContainer: {\n    flex: 1\n  },\n  logoText: {\n    fontSize: 40,\n    fontWeight: \"800\",\n    marginBottom: 30,\n    alignSelf: 'flex-start'\n  },\n  loginFormView: {\n    flex: 1\n  },\n  createNewAccount: {\n    marginTop: 14,\n    alignSelf: \"center\",\n    fontSize: 14,\n    color: \"#3897f1\"\n  },\n  loginFormTextInput: {\n    height: 43,\n    fontSize: 14,\n    borderRadius: 5,\n    borderWidth: 1,\n    borderColor: \"#eaeaea\",\n    backgroundColor: \"#fafafa\",\n    paddingLeft: 10,\n    marginTop: 5,\n    marginBottom: 5\n  },\n  loginButton: {\n    backgroundColor: \"#3897f1\",\n    borderRadius: 5,\n    height: 45,\n    marginTop: 30,\n    width: 350,\n    alignItems: \"center\"\n  },\n  margin: {\n    marginBottom: 130\n  },\n  container: {\n    flex: 1,\n    justifyContent: \"center\",\n    textAlign: \"center\",\n    paddingTop: 30,\n    padding: 1\n  },\n  spinnerTextStyle: {\n    color: \"#FFF\",\n    fontSize: 15\n  },\n  phoneInput: {\n    height: 43,\n    fontSize: 14,\n    borderRadius: 5,\n    borderWidth: 1,\n    borderColor: \"#eaeaea\",\n    backgroundColor: \"#fafafa\",\n    paddingLeft: 10,\n    marginTop: 10,\n    marginBottom: 5\n  }\n});","map":{"version":3,"sources":["C:/Users/USER/signupp/Components/ProfileScreens/ProfileEdit.js"],"names":["React","useState","useRef","useEffect","Button","SocialIcon","FontAwesome","FontAwesome5","Facebook","firebase","AsyncStorage","Spinner","ImagePikker","userToken","ProfileEdit","navigation","loading","setloading","fullName","setFullname","email","setEmail","Address","setAddress","phone","setPhone","lat","setLat","long","setLong","images","setImage","phoneRef","undefined","getItem","GetProfData","getpictureURL","console","log","storage","ref","getDownloadURL","then","url","e","firestore","collection","doc","get","exists","data","catch","error","updateUser","set","docRef","goBack","styles","containerView","container","spinnerTextStyle","Keyboard","dismiss","loginScreenContainer","loginFormView","logoText","margin","loginFormTextInput","t1","loginButton","StyleSheet","create","flex","alignItems","fontSize","fontWeight","marginBottom","alignSelf","createNewAccount","marginTop","color","height","borderRadius","borderWidth","borderColor","backgroundColor","paddingLeft","width","justifyContent","textAlign","paddingTop","padding","phoneInput"],"mappings":"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","sourcesContent":["import React, { useState, useRef, useEffect } from \"react\";\r\nimport {\r\n  Alert,\r\n  Image,\r\n  Keyboard,\r\n  KeyboardAvoidingView,\r\n  Text,\r\n  TextInput,\r\n  TouchableWithoutFeedback,\r\n  Pressable,\r\n  View,\r\n  ActivityIndicator,\r\n  LogBox,\r\n  StatusBar,\r\n  TouchableOpacity,\r\n  Switch,\r\n} from \"react-native\";\r\nimport { Button, SocialIcon } from \"react-native-elements\";\r\nimport { FontAwesome } from \"@expo/vector-icons\";\r\nimport { FontAwesome5 } from \"@expo/vector-icons\";\r\nimport * as Facebook from \"expo-facebook\";\r\nimport { StyleSheet } from \"react-native\";\r\nimport { firebase } from \"../firebaseConfig/Config\";\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport Spinner from \"react-native-loading-spinner-overlay\";\r\nimport ImagePikker from \"./ImagePikker\";\r\n\r\nlet userToken;\r\nexport default function ProfileEdit({ navigation }) {\r\n  const [loading, setloading] = useState(false);\r\n  const [fullName, setFullname] = useState(\"\");\r\n  const [email, setEmail] = useState(\"\");\r\n  const [Address, setAddress] = useState(\"\");\r\n  const [phone, setPhone] = useState(\"\");\r\n  const [lat, setLat] = useState(\"\");\r\n  const [long, setLong] = useState(\"\");\r\n  const [images, setImage] = useState(\"\");\r\n  const phoneRef = useRef(undefined);\r\n\r\n  useEffect(async () => {\r\n    setloading(true);\r\n    userToken = await AsyncStorage.getItem(\"xyz\");\r\n    GetProfData();\r\n    getpictureURL();\r\n  }, []);\r\n\r\n  //get image URL from firebase storege\r\n  const getpictureURL = () => {\r\n    console.log(\"-------------------------->\",userToken);\r\n    try {firebase.storage().ref(userToken).getDownloadURL().then((url) => {\r\n         setImage(url);\r\n         console.log(\"refress\");\r\n         \r\n       })\r\n     }\r\n       catch(e){\r\n         console.log(\"getting downloadURL of image error => \", e)\r\n       };\r\n  }\r\n  console.log(\"image------>>>>>>>\" + images);\r\n  const GetProfData = () => {\r\n    console.log(userToken);\r\n    firebase\r\n      .firestore()\r\n      .collection(\"Users\")\r\n      .doc(userToken)\r\n      .get()\r\n      .then((doc) => {\r\n        if (doc.exists) {\r\n          console.log(\"Document data:\", doc.data());\r\n          const data = doc.data();\r\n          //  setToken(data)\r\n          setFullname(data.fullName);\r\n          setEmail(data.email);\r\n          setPhone(data.phone);\r\n          setAddress(data.Address);\r\n          setloading(false);\r\n        } else {\r\n          console.log(\"No such document!\");\r\n          setloading(false);\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"Error getting document:\", error);\r\n        setloading(false);\r\n      });\r\n  };\r\n\r\n  const updateUser = () => {\r\n    setloading(true);\r\n    console.log(userToken);\r\n    firebase\r\n      .firestore()\r\n      .collection(\"Users\")\r\n      .doc(userToken)\r\n      .set({\r\n        fullName: fullName,\r\n        email: email,\r\n        phone: phone,\r\n        Address,\r\n        lat,\r\n        long,\r\n        images:images,\r\n      })\r\n      .then((docRef) => {\r\n        navigation.goBack();\r\n        setloading(false);\r\n      })\r\n      .catch((error) => {\r\n        console.error(\"Error: \", error);\r\n        setloading(false);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <KeyboardAvoidingView style={styles.containerView} behavior=\"padding\">\r\n      <StatusBar barStyle=\"dark-content\" />\r\n      <View style={styles.container}>\r\n        <Spinner\r\n          //visibility of Overlay Loading Spinner\r\n          visible={loading}\r\n          //Text with the Spinner\r\n          textContent={\"Loading...\"}\r\n          //Text style of the Spinner Text\r\n          textStyle={styles.spinnerTextStyle}\r\n        />\r\n        <TouchableWithoutFeedback onPress={Keyboard.dismiss}>\r\n          <View style={styles.loginScreenContainer}>\r\n            <View style={styles.loginFormView}>\r\n              <Text style={styles.logoText}>Edit Profile</Text>\r\n              <View style={styles.margin}>\r\n                <ImagePikker ss={images}/>\r\n              </View>\r\n              <TextInput\r\n                placeholder=\"Full name\"\r\n                placeholderColor=\"#c4c3cb\"\r\n                style={styles.loginFormTextInput}\r\n                value={fullName}\r\n                onChangeText={(t1) => {\r\n                  setFullname(t1);\r\n                }}\r\n              />\r\n              <TextInput\r\n                placeholder=\"Email\"\r\n                placeholderColor=\"#c4c3cb\"\r\n                style={styles.loginFormTextInput}\r\n                keyboardType=\"email-address\"\r\n                value={email}\r\n                onChangeText={(t1) => {\r\n                  setEmail(t1);\r\n                }}\r\n              />\r\n              <TextInput\r\n                placeholder=\"Phone\"\r\n                placeholderColor=\"#c4c3cb\"\r\n                style={styles.loginFormTextInput}\r\n                keyboardType=\"phone-pad\"\r\n                value={phone}\r\n                onChangeText={(t1) => {\r\n                  setPhone(t1);\r\n                }}\r\n              />\r\n\r\n              <Button\r\n                buttonStyle={styles.loginButton}\r\n                onPress={() => updateUser()}\r\n                title=\"Update\"\r\n              />\r\n            </View>\r\n          </View>\r\n        </TouchableWithoutFeedback>\r\n      </View>\r\n    </KeyboardAvoidingView>\r\n  );\r\n}\r\nconst styles = StyleSheet.create({\r\n  containerView: {\r\n    flex: 1,\r\n    alignItems: \"center\",\r\n  },\r\n  loginScreenContainer: {\r\n    flex: 1,\r\n  },\r\n  logoText: {\r\n    fontSize: 40,\r\n    fontWeight: \"800\",\r\n    marginBottom: 30,\r\n    alignSelf:'flex-start'\r\n  },\r\n  loginFormView: {\r\n    flex: 1,\r\n  },\r\n  createNewAccount: {\r\n    marginTop: 14,\r\n    alignSelf: \"center\",\r\n    fontSize: 14,\r\n    color: \"#3897f1\",\r\n  },\r\n  loginFormTextInput: {\r\n    height: 43,\r\n    fontSize: 14,\r\n    borderRadius: 5,\r\n    borderWidth: 1,\r\n    borderColor: \"#eaeaea\",\r\n    backgroundColor: \"#fafafa\",\r\n    paddingLeft: 10,\r\n    marginTop: 5,\r\n    marginBottom: 5,\r\n  },\r\n  loginButton: {\r\n    backgroundColor: \"#3897f1\",\r\n    borderRadius: 5,\r\n    height: 45,\r\n    marginTop: 30,\r\n    width: 350,\r\n    alignItems: \"center\",\r\n  },\r\n  margin: {\r\n    marginBottom: 130,\r\n  },\r\n\r\n  container: {\r\n    flex: 1,\r\n    justifyContent: \"center\",\r\n    textAlign: \"center\",\r\n    paddingTop: 30,\r\n    // backgroundColor: \"#ecf0f1\",\r\n    padding: 1,\r\n  },\r\n  spinnerTextStyle: {\r\n    color: \"#FFF\",\r\n    fontSize: 15,\r\n  },\r\n  phoneInput: {\r\n    height: 43,\r\n    fontSize: 14,\r\n    borderRadius: 5,\r\n    borderWidth: 1,\r\n    borderColor: \"#eaeaea\",\r\n    backgroundColor: \"#fafafa\",\r\n    paddingLeft: 10,\r\n    marginTop: 10,\r\n    marginBottom: 5,\r\n  },\r\n});\r\n"]},"metadata":{},"sourceType":"module"}