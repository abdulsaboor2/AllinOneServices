{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState, useEffect } from \"react\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Animated from \"react-native-web/dist/exports/Animated\";\nimport * as ImagePicker from \"expo-image-picker\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport ImageBackground from \"react-native-web/dist/exports/ImageBackground\";\nimport Dialog from \"react-native-dialog\";\nimport { firebase } from \"../firebaseConfig/Config\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nexport default function ImagePikker() {\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      image = _useState2[0],\n      setImage = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      visible = _useState4[0],\n      setVisible = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      pickedImagePath = _useState6[0],\n      setPickedImagePath = _useState6[1];\n\n  var _useState7 = useState(new Animated.Value(0)),\n      _useState8 = _slicedToArray(_useState7, 2),\n      animation = _useState8[0],\n      setAnimation = _useState8[1];\n\n  var handleAnimation = function handleAnimation() {\n    Animated.timing(animation, {\n      toValue: 3,\n      duration: 1000,\n      useNativeDriver: false\n    }).start(function () {\n      Animated.timing(animation, {\n        toValue: 2,\n        duration: 1000,\n        useNativeDriver: false\n      }).start(function () {\n        Animated.timing(animation, {\n          toValue: 3,\n          duration: 1000,\n          useNativeDriver: false\n        }).start(function () {\n          Animated.timing(animation, {\n            toValue: 0,\n            duration: 1000,\n            useNativeDriver: false\n          }).start();\n        });\n      });\n    });\n  };\n\n  var boxInterpolation = animation.interpolate({\n    inputRange: [0, 1, 2, 3],\n    outputRange: ['rgb(90,210,244)', 'rgb(224,82,99)', 'rgb(0,255,0)', \"rgb(154,205,50)\"]\n  });\n  var animatedStyle = {\n    borderColor: boxInterpolation\n  };\n  var userToken;\n  useEffect(function _callee() {\n    var imageRef;\n    return _regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem(\"xyz\"));\n\n          case 3:\n            userToken = _context.sent;\n            console.log(\"hello its front screen\", userToken);\n            _context.next = 10;\n            break;\n\n          case 7:\n            _context.prev = 7;\n            _context.t0 = _context[\"catch\"](0);\n            console.log(_context.t0);\n\n          case 10:\n            imageRef = firebase.storage().ref(userToken);\n            imageRef.getDownloadURL().then(function (url) {\n              setImage(url);\n              wait(3000).then(function () {\n                return setRefreshing(false);\n              });\n              console.log(\"refress\");\n            }).catch(function (e) {\n              return console.log(\"getting downloadURL of image error => \", e);\n            });\n\n          case 12:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 7]], Promise);\n  });\n\n  var uploadImage = function uploadImage(image) {\n    var response, blob, ref;\n    return _regeneratorRuntime.async(function uploadImage$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _regeneratorRuntime.awrap(fetch(image));\n\n          case 2:\n            response = _context2.sent;\n            _context2.next = 5;\n            return _regeneratorRuntime.awrap(response.blob());\n\n          case 5:\n            blob = _context2.sent;\n            ref = firebase.storage().ref().child(userToken);\n            return _context2.abrupt(\"return\", ref.put(blob));\n\n          case 8:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var showDialog = function showDialog() {\n    setVisible(true);\n  };\n\n  var handleCancel = function handleCancel() {\n    setVisible(false);\n  };\n\n  useEffect(function () {\n    (function _callee2() {\n      var _await$ImagePicker$re, status;\n\n      return _regeneratorRuntime.async(function _callee2$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              if (!(Platform.OS !== \"web\")) {\n                _context3.next = 6;\n                break;\n              }\n\n              _context3.next = 3;\n              return _regeneratorRuntime.awrap(ImagePicker.requestMediaLibraryPermissionsAsync());\n\n            case 3:\n              _await$ImagePicker$re = _context3.sent;\n              status = _await$ImagePicker$re.status;\n\n              if (status !== \"granted\") {\n                alert(\"Sorry, Camera roll permissions are required to make this work!\");\n              }\n\n            case 6:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    })();\n  }, []);\n\n  var openCamera = function openCamera() {\n    var permissionResult, result;\n    return _regeneratorRuntime.async(function openCamera$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            _context4.next = 2;\n            return _regeneratorRuntime.awrap(ImagePicker.requestCameraPermissionsAsync());\n\n          case 2:\n            permissionResult = _context4.sent;\n\n            if (!(permissionResult.granted === false)) {\n              _context4.next = 6;\n              break;\n            }\n\n            alert(\"You've refused to allow this appp to access your camera!\");\n            return _context4.abrupt(\"return\");\n\n          case 6:\n            _context4.next = 8;\n            return _regeneratorRuntime.awrap(ImagePicker.launchCameraAsync());\n\n          case 8:\n            result = _context4.sent;\n            setVisible(false);\n            console.log(result);\n\n            if (!result.cancelled) {\n              setPickedImagePath(result.uri);\n              console.log(result.uri);\n\n              try {\n                uploadImage(result.uri);\n              } catch (error) {\n                alert(error);\n              }\n            }\n\n            image == null;\n\n          case 13:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var pickImage = function pickImage() {\n    var result;\n    return _regeneratorRuntime.async(function pickImage$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            _context5.next = 2;\n            return _regeneratorRuntime.awrap(ImagePicker.launchImageLibraryAsync({\n              mediaTypes: ImagePicker.MediaTypeOptions.All,\n              allowsEditing: true,\n              aspect: [4, 3],\n              quality: 1\n            }));\n\n          case 2:\n            result = _context5.sent;\n            console.log(result);\n\n            if (!result.cancelled) {\n              setImage(result.uri);\n              result.name;\n\n              try {\n                uploadImage(result.uri);\n                handleAnimation();\n              } catch (error) {\n                alert(error);\n              }\n            }\n\n            setVisible(false);\n            pickedImagePath == null;\n\n          case 7:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  return _jsxs(_Fragment, {\n    children: [_jsxs(View, {\n      style: {\n        flex: 1,\n        alignItems: \"center\",\n        justifyContent: \"center\"\n      },\n      children: [_jsx(TouchableOpacity, {\n        onPress: showDialog,\n        children: _jsx(Animated.View, {\n          style: _objectSpread({\n            width: 100,\n            alignItems: \"center\",\n            justifyContent: \"center\",\n            height: 100,\n            borderRadius: 100 / 2,\n            borderColor: \"#1976d2\",\n            borderWidth: 2\n          }, animatedStyle),\n          children: _jsxs(ImageBackground, {\n            style: {\n              justifyContent: \"center\",\n              alignContent: \"center\",\n              alignItems: \"center\",\n              width: 90,\n              height: 90,\n              borderRadius: 90 / 2\n            },\n            source: require(\"../../assets/EXtraUsepictures/user.png\"),\n            children: [_jsxs(Dialog.Container, {\n              visible: visible,\n              children: [_jsx(Dialog.Title, {\n                children: \"Upload Photo\"\n              }), _jsx(Dialog.Description, {\n                children: \"Chose Your Profile Picture?\"\n              }), _jsx(Dialog.Button, {\n                label: \"Camera\",\n                onPress: openCamera\n              }), _jsx(Dialog.Button, {\n                label: \"Cancel\",\n                onPress: handleCancel\n              }), _jsx(Dialog.Button, {\n                label: \"Gallery\",\n                onPress: pickImage\n              })]\n            }), pickedImagePath !== \"\" && _jsx(Image, {\n              source: {\n                uri: pickedImagePath\n              },\n              style: {\n                width: 90,\n                borderRadius: 90 / 2,\n                height: 90\n              }\n            }) || image && _jsx(Image, {\n              source: {\n                uri: image\n              },\n              style: {\n                width: 90,\n                borderRadius: 90 / 2,\n                height: 90\n              }\n            })]\n          })\n        })\n      }), _jsx(Button, {\n        title: \"Upload Image\",\n        onPress: showDialog\n      })]\n    }), _jsx(View, {\n      style: styles.container\n    })]\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: \"#fff\",\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  }\n});","map":{"version":3,"sources":["C:/Users/USER/signupp/Components/ProfileScreens/ImagePikker.js"],"names":["React","useState","useEffect","ImagePicker","Dialog","firebase","AsyncStorage","ImagePikker","image","setImage","visible","setVisible","pickedImagePath","setPickedImagePath","Animated","Value","animation","setAnimation","handleAnimation","timing","toValue","duration","useNativeDriver","start","boxInterpolation","interpolate","inputRange","outputRange","animatedStyle","borderColor","userToken","getItem","console","log","imageRef","storage","ref","getDownloadURL","then","url","wait","setRefreshing","catch","e","uploadImage","fetch","response","blob","child","put","showDialog","handleCancel","Platform","OS","requestMediaLibraryPermissionsAsync","status","alert","openCamera","requestCameraPermissionsAsync","permissionResult","granted","launchCameraAsync","result","cancelled","uri","error","pickImage","launchImageLibraryAsync","mediaTypes","MediaTypeOptions","All","allowsEditing","aspect","quality","name","flex","alignItems","justifyContent","width","height","borderRadius","borderWidth","alignContent","require","styles","container","StyleSheet","create","backgroundColor"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { Button, Image, View, StyleSheet,Animated } from \"react-native\";\r\nimport * as ImagePicker from \"expo-image-picker\";\r\nimport { TouchableOpacity, ImageBackground } from \"react-native\";\r\nimport Dialog from \"react-native-dialog\";\r\nimport { firebase } from \"../firebaseConfig/Config\";\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\n\r\nexport default function ImagePikker() {\r\n  const [image, setImage] = useState(null);\r\n  const [visible, setVisible] = useState(false);\r\n  const [pickedImagePath, setPickedImagePath] = useState(\"\");\r\n  const [animation, setAnimation] = useState(new Animated.Value(0));\r\n\r\n  const handleAnimation = () => {\r\n    Animated.timing(animation, {\r\n      toValue: 3,\r\n      duration: 1000,\r\n      useNativeDriver: false\r\n    }).start(() => {\r\n      Animated.timing(animation, {\r\n        toValue: 2,\r\n        duration: 1000,\r\n        useNativeDriver: false\r\n      }).start(() => {\r\n        Animated.timing(animation, {\r\n          toValue: 3,\r\n          duration: 1000,\r\n          useNativeDriver: false\r\n        }).start(() => {\r\n        Animated.timing(animation, {\r\n          toValue: 0,\r\n          duration: 1000,\r\n          useNativeDriver: false\r\n        }).start();\r\n      });\r\n      });\r\n    });\r\n  };\r\n  const boxInterpolation = animation.interpolate({\r\n    inputRange: [0, 1, 2,3],\r\n    outputRange: ['rgb(90,210,244)', 'rgb(224,82,99)', 'rgb(0,255,0)',\"rgb(154,205,50)\"],\r\n  });\r\n  const animatedStyle = {\r\n    borderColor: boxInterpolation,\r\n  };\r\n\r\n  let userToken;\r\n\r\n  useEffect(async () => {\r\n    try {\r\n      userToken = await AsyncStorage.getItem(\"xyz\");\r\n      console.log(\"hello its front screen\", userToken);\r\n    } catch (e) {\r\n      console.log(e);\r\n    }\r\n    let imageRef = firebase.storage().ref(userToken);\r\n    imageRef\r\n      .getDownloadURL()\r\n      .then((url) => {\r\n        setImage(url);\r\n        wait(3000).then(() => setRefreshing(false));\r\n        console.log(\"refress\");\r\n      })\r\n      .catch((e) => console.log(\"getting downloadURL of image error => \", e));\r\n  });\r\n\r\n  const uploadImage = async (image) => {\r\n    const response = await fetch(image);\r\n    const blob = await response.blob();\r\n    var ref = firebase.storage().ref().child(userToken);\r\n    return ref.put(blob);\r\n  };\r\n\r\n  const showDialog = () => {\r\n    setVisible(true);\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setVisible(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      if (Platform.OS !== \"web\") {\r\n        const { status } =\r\n          await ImagePicker.requestMediaLibraryPermissionsAsync();\r\n        if (status !== \"granted\") {\r\n          alert(\r\n            \"Sorry, Camera roll permissions are required to make this work!\"\r\n          );\r\n        }\r\n      }\r\n    })();\r\n  }, []);\r\n\r\n  const openCamera = async () => {\r\n    // Ask the user for the permission to access the camera\r\n    const permissionResult = await ImagePicker.requestCameraPermissionsAsync();\r\n\r\n    if (permissionResult.granted === false) {\r\n      alert(\"You've refused to allow this appp to access your camera!\");\r\n      return;\r\n    }\r\n\r\n    const result = await ImagePicker.launchCameraAsync();\r\n    setVisible(false);\r\n    // Explore the result\r\n    console.log(result);\r\n\r\n    if (!result.cancelled) {\r\n      setPickedImagePath(result.uri);\r\n      console.log(result.uri);\r\n      try {\r\n        uploadImage(result.uri);\r\n      } catch (error) {\r\n        alert(error);\r\n      }\r\n    }\r\n    image == null;\r\n  };\r\n\r\n  const pickImage = async () => {\r\n    // No permissions request is necessary for launching the image library\r\n    let result = await ImagePicker.launchImageLibraryAsync({\r\n      mediaTypes: ImagePicker.MediaTypeOptions.All,\r\n      allowsEditing: true,\r\n      aspect: [4, 3],\r\n      quality: 1,\r\n    });\r\n\r\n    console.log(result);\r\n\r\n    if (!result.cancelled) {\r\n      setImage(result.uri);\r\n      result.name;\r\n      try {\r\n        uploadImage(result.uri);\r\n        handleAnimation();\r\n      } catch (error) {\r\n        alert(error);\r\n      }\r\n    }\r\n\r\n    setVisible(false);\r\n    pickedImagePath == null;\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <View style={{ flex: 1, alignItems: \"center\", justifyContent: \"center\" }}>\r\n        <TouchableOpacity onPress={showDialog}>\r\n          <Animated.View \r\n          style={{\r\n            width: 100,\r\n            alignItems: \"center\",\r\n            justifyContent: \"center\",\r\n            height: 100,\r\n            borderRadius: 100 / 2,\r\n            borderColor: \"#1976d2\",\r\n              borderWidth: 2,\r\n              ...animatedStyle\r\n          }}>\r\n          <ImageBackground\r\n            style={{\r\n              justifyContent: \"center\",\r\n              alignContent: \"center\",\r\n              alignItems: \"center\",\r\n              width: 90,\r\n              height: 90,\r\n              borderRadius: 90 / 2,\r\n            }}\r\n            source={require(\"../../assets/EXtraUsepictures/user.png\")}\r\n          >\r\n            <Dialog.Container visible={visible}>\r\n              <Dialog.Title>Upload Photo</Dialog.Title>\r\n              <Dialog.Description>\r\n                Chose Your Profile Picture?\r\n              </Dialog.Description>\r\n              <Dialog.Button label=\"Camera\" onPress={openCamera} />\r\n              <Dialog.Button label=\"Cancel\" onPress={handleCancel} />\r\n              <Dialog.Button label=\"Gallery\" onPress={pickImage} />\r\n            </Dialog.Container>\r\n\r\n            {/* { <Image\r\n                style={{width: 95, alignItems: 'center', justifyContent: 'center', height: 95, borderRadius: 95 / 2 }}\r\n          \r\n          source={require(\"../assets/Camera.png\")}/> } */}\r\n\r\n            {(pickedImagePath !== \"\" && (\r\n              <Image\r\n                source={{ uri: pickedImagePath }}\r\n                style={{ width: 90, borderRadius: 90 / 2, height: 90 }}\r\n              />\r\n            )) ||\r\n              (image && (\r\n                <Image\r\n                  source={{ uri: image }}\r\n                  style={{ width: 90, borderRadius: 90/ 2, height: 90 }}\r\n                />\r\n              ))}\r\n            </ImageBackground>\r\n            </Animated.View>\r\n        </TouchableOpacity>\r\n        <Button title=\"Upload Image\" onPress={showDialog} />\r\n      </View>\r\n\r\n      <View style={styles.container}>\r\n        {/* <Button title=\"Show dialog\" onPress={showDialog} /> */}\r\n      </View>\r\n    </>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: \"#fff\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n  },\r\n});\r\n"]},"metadata":{},"sourceType":"module"}