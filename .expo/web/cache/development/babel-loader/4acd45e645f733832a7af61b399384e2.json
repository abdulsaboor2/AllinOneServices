{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"/home/runner/work/react-native-action-sheet/react-native-action-sheet/src/ActionSheet/index.tsx\";\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nimport * as React from 'react';\nimport Animated from \"react-native-web/dist/exports/Animated\";\nimport BackHandler from \"react-native-web/dist/exports/BackHandler\";\nimport Easing from \"react-native-web/dist/exports/Easing\";\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TouchableWithoutFeedback from \"react-native-web/dist/exports/TouchableWithoutFeedback\";\nimport View from \"react-native-web/dist/exports/View\";\nimport ActionGroup from \"./ActionGroup\";\nvar OPACITY_ANIMATION_IN_TIME = 225;\nvar OPACITY_ANIMATION_OUT_TIME = 195;\nvar EASING_OUT = Easing.bezier(0.25, 0.46, 0.45, 0.94);\nvar EASING_IN = Easing.out(EASING_OUT);\nvar ESCAPE_KEY = 'Escape';\n\nvar ActionSheet = function (_React$Component) {\n  _inherits(ActionSheet, _React$Component);\n\n  var _super = _createSuper(ActionSheet);\n\n  function ActionSheet() {\n    var _this;\n\n    _classCallCheck(this, ActionSheet);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this._actionSheetHeight = 360;\n    _this.state = {\n      isVisible: false,\n      isAnimating: false,\n      options: null,\n      onSelect: null,\n      overlayOpacity: new Animated.Value(0),\n      sheetOpacity: new Animated.Value(0)\n    };\n    _this._deferAfterAnimation = undefined;\n\n    _this._handleWebKeyDown = function (event) {\n      if (event.key === ESCAPE_KEY && _this.state.isVisible) {\n        event.preventDefault();\n\n        _this._selectCancelButton();\n      }\n    };\n\n    _this._setActionSheetHeight = function (_ref) {\n      var nativeEvent = _ref.nativeEvent;\n      return _this._actionSheetHeight = nativeEvent.layout.height;\n    };\n\n    _this.showActionSheetWithOptions = function (options, onSelect) {\n      var _this$state = _this.state,\n          isVisible = _this$state.isVisible,\n          overlayOpacity = _this$state.overlayOpacity,\n          sheetOpacity = _this$state.sheetOpacity;\n\n      if (isVisible) {\n        _this._deferAfterAnimation = _this.showActionSheetWithOptions.bind(_assertThisInitialized(_this), options, onSelect);\n        return;\n      }\n\n      _this.setState({\n        options: options,\n        onSelect: onSelect,\n        isVisible: true,\n        isAnimating: true\n      });\n\n      overlayOpacity.setValue(0);\n      sheetOpacity.setValue(0);\n      Animated.parallel([Animated.timing(overlayOpacity, {\n        toValue: 0.32,\n        easing: EASING_OUT,\n        duration: OPACITY_ANIMATION_IN_TIME,\n        useNativeDriver: _this.props.useNativeDriver\n      }), Animated.timing(sheetOpacity, {\n        toValue: 1,\n        easing: EASING_OUT,\n        duration: OPACITY_ANIMATION_IN_TIME,\n        useNativeDriver: _this.props.useNativeDriver\n      })]).start(function (result) {\n        if (result.finished) {\n          _this.setState({\n            isAnimating: false\n          });\n\n          _this._deferAfterAnimation = undefined;\n        }\n      });\n      BackHandler.addEventListener('actionSheetHardwareBackPress', _this._selectCancelButton);\n    };\n\n    _this._selectCancelButton = function () {\n      var options = _this.state.options;\n\n      if (!options) {\n        return false;\n      }\n\n      if (typeof options.cancelButtonIndex === 'undefined') {\n        return false;\n      } else if (typeof options.cancelButtonIndex === 'number') {\n        return _this._onSelect(options.cancelButtonIndex);\n      } else {\n        return _this._animateOut();\n      }\n    };\n\n    _this._onSelect = function (index) {\n      var _this$state2 = _this.state,\n          isAnimating = _this$state2.isAnimating,\n          onSelect = _this$state2.onSelect;\n\n      if (isAnimating) {\n        return false;\n      }\n\n      if (onSelect) {\n        _this._deferAfterAnimation = onSelect.bind(_assertThisInitialized(_this), index);\n      }\n\n      return _this._animateOut();\n    };\n\n    _this._animateOut = function () {\n      var _this$state3 = _this.state,\n          isAnimating = _this$state3.isAnimating,\n          overlayOpacity = _this$state3.overlayOpacity,\n          sheetOpacity = _this$state3.sheetOpacity;\n\n      if (isAnimating) {\n        return false;\n      }\n\n      BackHandler.removeEventListener('actionSheetHardwareBackPress', _this._selectCancelButton);\n\n      _this.setState({\n        isAnimating: true\n      });\n\n      Animated.parallel([Animated.timing(overlayOpacity, {\n        toValue: 0,\n        easing: EASING_IN,\n        duration: OPACITY_ANIMATION_OUT_TIME,\n        useNativeDriver: _this.props.useNativeDriver\n      }), Animated.timing(sheetOpacity, {\n        toValue: 0,\n        easing: EASING_IN,\n        duration: OPACITY_ANIMATION_OUT_TIME,\n        useNativeDriver: _this.props.useNativeDriver\n      })]).start(function (result) {\n        if (result.finished) {\n          _this.setState({\n            isVisible: false,\n            isAnimating: false\n          });\n\n          if (_this._deferAfterAnimation) {\n            _this._deferAfterAnimation();\n          }\n        }\n      });\n      return true;\n    };\n\n    return _this;\n  }\n\n  _createClass(ActionSheet, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (Platform.OS === 'web') {\n        document.addEventListener('keydown', this._handleWebKeyDown);\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (Platform.OS === 'web') {\n        document.removeEventListener('keydown', this._handleWebKeyDown);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state4 = this.state,\n          isVisible = _this$state4.isVisible,\n          overlayOpacity = _this$state4.overlayOpacity,\n          options = _this$state4.options;\n      var useModal = options ? options.autoFocus || options.useModal === true : false;\n      var overlay = isVisible ? React.createElement(Animated.View, {\n        style: [styles.overlay, {\n          opacity: overlayOpacity\n        }],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 7\n        }\n      }) : null;\n      var appContent = React.createElement(View, {\n        style: styles.flexContainer,\n        importantForAccessibility: isVisible ? 'no-hide-descendants' : 'auto',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 7\n        }\n      }, React.Children.only(this.props.children));\n      return React.createElement(View, {\n        pointerEvents: this.props.pointerEvents,\n        style: styles.flexContainer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 7\n        }\n      }, appContent, isVisible && !useModal && React.createElement(React.Fragment, null, overlay, this._renderSheet()), isVisible && useModal && React.createElement(Modal, {\n        animationType: \"none\",\n        transparent: true,\n        onRequestClose: this._selectCancelButton,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 11\n        }\n      }, overlay, this._renderSheet()));\n    }\n  }, {\n    key: \"_renderSheet\",\n    value: function _renderSheet() {\n      var _this$state5 = this.state,\n          options = _this$state5.options,\n          isAnimating = _this$state5.isAnimating,\n          sheetOpacity = _this$state5.sheetOpacity;\n\n      if (!options) {\n        return null;\n      }\n\n      var optionsArray = options.options,\n          icons = options.icons,\n          tintIcons = options.tintIcons,\n          destructiveButtonIndex = options.destructiveButtonIndex,\n          disabledButtonIndices = options.disabledButtonIndices,\n          destructiveColor = options.destructiveColor,\n          textStyle = options.textStyle,\n          tintColor = options.tintColor,\n          title = options.title,\n          titleTextStyle = options.titleTextStyle,\n          message = options.message,\n          messageTextStyle = options.messageTextStyle,\n          autoFocus = options.autoFocus,\n          showSeparators = options.showSeparators,\n          containerStyle = options.containerStyle,\n          separatorStyle = options.separatorStyle;\n      return React.createElement(TouchableWithoutFeedback, {\n        importantForAccessibility: \"yes\",\n        onPress: this._selectCancelButton,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 7\n        }\n      }, React.createElement(Animated.View, {\n        needsOffscreenAlphaCompositing: isAnimating,\n        style: [styles.sheetContainer, {\n          opacity: sheetOpacity,\n          transform: [{\n            translateY: sheetOpacity.interpolate({\n              inputRange: [0, 1],\n              outputRange: [this._actionSheetHeight, 0]\n            })\n          }]\n        }],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 9\n        }\n      }, React.createElement(View, {\n        style: styles.sheet,\n        onLayout: this._setActionSheetHeight,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 11\n        }\n      }, React.createElement(ActionGroup, {\n        options: optionsArray,\n        icons: icons,\n        tintIcons: tintIcons === undefined ? true : tintIcons,\n        destructiveButtonIndex: destructiveButtonIndex,\n        destructiveColor: destructiveColor,\n        disabledButtonIndices: disabledButtonIndices,\n        onSelect: this._onSelect,\n        startIndex: 0,\n        length: optionsArray.length,\n        textStyle: textStyle || {},\n        tintColor: tintColor,\n        title: title || undefined,\n        titleTextStyle: titleTextStyle,\n        message: message || undefined,\n        messageTextStyle: messageTextStyle,\n        autoFocus: autoFocus,\n        showSeparators: showSeparators,\n        containerStyle: containerStyle,\n        separatorStyle: separatorStyle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 13\n        }\n      }))));\n    }\n  }]);\n\n  return ActionSheet;\n}(React.Component);\n\nActionSheet.defaultProps = {\n  useNativeDriver: true\n};\nexport { ActionSheet as default };\nvar styles = StyleSheet.create({\n  flexContainer: {\n    flex: 1\n  },\n  overlay: {\n    position: 'absolute',\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0,\n    backgroundColor: 'black'\n  },\n  sheetContainer: {\n    position: 'absolute',\n    left: 0,\n    right: 0,\n    bottom: 0,\n    top: 0,\n    backgroundColor: 'transparent',\n    alignItems: 'flex-end',\n    justifyContent: 'center',\n    flexDirection: 'row'\n  },\n  sheet: {\n    flex: 1,\n    backgroundColor: 'transparent'\n  }\n});","map":{"version":3,"sources":["index.tsx"],"names":["OPACITY_ANIMATION_IN_TIME","OPACITY_ANIMATION_OUT_TIME","EASING_OUT","Easing","EASING_IN","ESCAPE_KEY","ActionSheet","React","Component","defaultProps","useNativeDriver","_actionSheetHeight","state","isVisible","isAnimating","options","onSelect","overlayOpacity","Animated","sheetOpacity","_deferAfterAnimation","undefined","Platform","document","_handleWebKeyDown","event","_setActionSheetHeight","nativeEvent","useModal","overlay","styles","opacity","appContent","optionsArray","icons","tintIcons","destructiveButtonIndex","disabledButtonIndices","destructiveColor","textStyle","tintColor","title","titleTextStyle","message","messageTextStyle","autoFocus","showSeparators","containerStyle","separatorStyle","transform","translateY","inputRange","outputRange","showActionSheetWithOptions","toValue","easing","duration","result","BackHandler","_selectCancelButton","_onSelect","_animateOut","StyleSheet","flexContainer","flex","position","top","right","bottom","left","backgroundColor","sheetContainer","alignItems","justifyContent","flexDirection","sheet"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport {\n  Animated,\n  BackHandler,\n  Easing,\n  Modal,\n  Platform,\n  StyleSheet,\n  TouchableWithoutFeedback,\n  View,\n  ViewProps,\n} from 'react-native';\n\nimport { ActionSheetOptions } from '../types';\nimport ActionGroup from './ActionGroup';\n\ninterface State {\n  isVisible: boolean;\n  isAnimating: boolean;\n  options: ActionSheetOptions | null;\n  onSelect: ((i: number) => void) | null;\n  overlayOpacity: any;\n  sheetOpacity: any;\n}\n\ninterface Props {\n  readonly useNativeDriver: boolean | undefined;\n  readonly pointerEvents?: ViewProps['pointerEvents'];\n}\n\nconst OPACITY_ANIMATION_IN_TIME = 225;\nconst OPACITY_ANIMATION_OUT_TIME = 195;\nconst EASING_OUT = Easing.bezier(0.25, 0.46, 0.45, 0.94);\nconst EASING_IN = Easing.out(EASING_OUT);\nconst ESCAPE_KEY = 'Escape';\n\n// Has same API as https://facebook.github.io/react-native/docs/actionsheetios.html\nexport default class ActionSheet extends React.Component<Props, State> {\n  static defaultProps = {\n    useNativeDriver: true,\n  };\n\n  _actionSheetHeight = 360;\n\n  state: State = {\n    isVisible: false,\n    isAnimating: false,\n    options: null,\n    onSelect: null,\n    overlayOpacity: new Animated.Value(0),\n    sheetOpacity: new Animated.Value(0),\n  };\n\n  _deferAfterAnimation?: () => void = undefined;\n\n  componentDidMount() {\n    if (Platform.OS === 'web') {\n      document.addEventListener('keydown', this._handleWebKeyDown);\n    }\n  }\n\n  componentWillUnmount() {\n    if (Platform.OS === 'web') {\n      document.removeEventListener('keydown', this._handleWebKeyDown);\n    }\n  }\n\n  _handleWebKeyDown = (event: KeyboardEvent): void => {\n    if (event.key === ESCAPE_KEY && this.state.isVisible) {\n      event.preventDefault();\n      this._selectCancelButton();\n    }\n  };\n\n  _setActionSheetHeight = ({ nativeEvent }: any) =>\n    (this._actionSheetHeight = nativeEvent.layout.height);\n\n  render() {\n    const { isVisible, overlayOpacity, options } = this.state;\n    const useModal = options ? options.autoFocus || options.useModal === true : false;\n    const overlay = isVisible ? (\n      <Animated.View\n        style={[\n          styles.overlay,\n          {\n            opacity: overlayOpacity,\n          },\n        ]}\n      />\n    ) : null;\n\n    // While the sheet is visible, hide the rest of the app's content from screen readers.\n    const appContent = (\n      <View\n        style={styles.flexContainer}\n        importantForAccessibility={isVisible ? 'no-hide-descendants' : 'auto'}>\n        {React.Children.only(this.props.children)}\n      </View>\n    );\n\n    return (\n      <View pointerEvents={this.props.pointerEvents} style={styles.flexContainer}>\n        {appContent}\n        {isVisible && !useModal && (\n          <>\n            {overlay}\n            {this._renderSheet()}\n          </>\n        )}\n        {isVisible && useModal && (\n          <Modal animationType=\"none\" transparent onRequestClose={this._selectCancelButton}>\n            {overlay}\n            {this._renderSheet()}\n          </Modal>\n        )}\n      </View>\n    );\n  }\n\n  _renderSheet() {\n    const { options, isAnimating, sheetOpacity } = this.state;\n\n    if (!options) {\n      return null;\n    }\n\n    const {\n      options: optionsArray,\n      icons,\n      tintIcons,\n      destructiveButtonIndex,\n      disabledButtonIndices,\n      destructiveColor,\n      textStyle,\n      tintColor,\n      title,\n      titleTextStyle,\n      message,\n      messageTextStyle,\n      autoFocus,\n      showSeparators,\n      containerStyle,\n      separatorStyle,\n    } = options;\n    return (\n      <TouchableWithoutFeedback importantForAccessibility=\"yes\" onPress={this._selectCancelButton}>\n        <Animated.View\n          needsOffscreenAlphaCompositing={isAnimating}\n          style={[\n            styles.sheetContainer,\n            {\n              opacity: sheetOpacity,\n              transform: [\n                {\n                  translateY: sheetOpacity.interpolate({\n                    inputRange: [0, 1],\n                    outputRange: [this._actionSheetHeight, 0],\n                  }),\n                },\n              ],\n            },\n          ]}>\n          <View style={styles.sheet} onLayout={this._setActionSheetHeight}>\n            <ActionGroup\n              options={optionsArray}\n              icons={icons}\n              tintIcons={tintIcons === undefined ? true : tintIcons}\n              destructiveButtonIndex={destructiveButtonIndex}\n              destructiveColor={destructiveColor}\n              disabledButtonIndices={disabledButtonIndices}\n              onSelect={this._onSelect}\n              startIndex={0}\n              length={optionsArray.length}\n              textStyle={textStyle || {}}\n              tintColor={tintColor}\n              title={title || undefined}\n              titleTextStyle={titleTextStyle}\n              message={message || undefined}\n              messageTextStyle={messageTextStyle}\n              autoFocus={autoFocus}\n              showSeparators={showSeparators}\n              containerStyle={containerStyle}\n              separatorStyle={separatorStyle}\n            />\n          </View>\n        </Animated.View>\n      </TouchableWithoutFeedback>\n    );\n  }\n\n  showActionSheetWithOptions = (options: ActionSheetOptions, onSelect: (i: number) => void) => {\n    const { isVisible, overlayOpacity, sheetOpacity } = this.state;\n\n    if (isVisible) {\n      this._deferAfterAnimation = this.showActionSheetWithOptions.bind(this, options, onSelect);\n      return;\n    }\n\n    this.setState({\n      options,\n      onSelect,\n      isVisible: true,\n      isAnimating: true,\n    });\n    overlayOpacity.setValue(0);\n    sheetOpacity.setValue(0);\n    Animated.parallel([\n      Animated.timing(overlayOpacity, {\n        toValue: 0.32,\n        easing: EASING_OUT,\n        duration: OPACITY_ANIMATION_IN_TIME,\n        useNativeDriver: this.props.useNativeDriver,\n      }),\n      Animated.timing(sheetOpacity, {\n        toValue: 1,\n        easing: EASING_OUT,\n        duration: OPACITY_ANIMATION_IN_TIME,\n        useNativeDriver: this.props.useNativeDriver,\n      }),\n    ]).start((result) => {\n      if (result.finished) {\n        this.setState({\n          isAnimating: false,\n        });\n        this._deferAfterAnimation = undefined;\n      }\n    });\n    // @ts-ignore: Argument of type '\"actionSheetHardwareBackPress\"' is not assignable to parameter of type '\"hardwareBackPress\"'\n    BackHandler.addEventListener('actionSheetHardwareBackPress', this._selectCancelButton);\n  };\n\n  _selectCancelButton = () => {\n    const { options } = this.state;\n\n    if (!options) {\n      return false;\n    }\n\n    if (typeof options.cancelButtonIndex === 'undefined') {\n      return false;\n    } else if (typeof options.cancelButtonIndex === 'number') {\n      return this._onSelect(options.cancelButtonIndex);\n    } else {\n      return this._animateOut();\n    }\n  };\n\n  _onSelect = (index: number): boolean => {\n    const { isAnimating, onSelect } = this.state;\n\n    if (isAnimating) {\n      return false;\n    }\n\n    if (onSelect) {\n      this._deferAfterAnimation = onSelect.bind(this, index);\n    }\n\n    return this._animateOut();\n  };\n\n  _animateOut = (): boolean => {\n    const { isAnimating, overlayOpacity, sheetOpacity } = this.state;\n\n    if (isAnimating) {\n      return false;\n    }\n\n    // @ts-ignore: Argument of type '\"actionSheetHardwareBackPress\"' is not assignable to parameter of type '\"hardwareBackPress\"'\n    BackHandler.removeEventListener('actionSheetHardwareBackPress', this._selectCancelButton);\n    this.setState({\n      isAnimating: true,\n    });\n    Animated.parallel([\n      Animated.timing(overlayOpacity, {\n        toValue: 0,\n        easing: EASING_IN,\n        duration: OPACITY_ANIMATION_OUT_TIME,\n        useNativeDriver: this.props.useNativeDriver,\n      }),\n      Animated.timing(sheetOpacity, {\n        toValue: 0,\n        easing: EASING_IN,\n        duration: OPACITY_ANIMATION_OUT_TIME,\n        useNativeDriver: this.props.useNativeDriver,\n      }),\n    ]).start((result) => {\n      if (result.finished) {\n        this.setState({\n          isVisible: false,\n          isAnimating: false,\n        });\n\n        if (this._deferAfterAnimation) {\n          this._deferAfterAnimation();\n        }\n      }\n    });\n    return true;\n  };\n}\n\nconst styles = StyleSheet.create({\n  flexContainer: {\n    flex: 1,\n  },\n  overlay: {\n    position: 'absolute',\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0,\n    backgroundColor: 'black',\n  },\n  sheetContainer: {\n    position: 'absolute',\n    left: 0,\n    right: 0,\n    bottom: 0,\n    top: 0,\n    backgroundColor: 'transparent',\n    alignItems: 'flex-end',\n    justifyContent: 'center',\n    flexDirection: 'row',\n  },\n  sheet: {\n    flex: 1,\n    backgroundColor: 'transparent',\n  },\n});\n"]},"metadata":{},"sourceType":"module"}